<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
    <link rel="stylesheet" href="style.css">
    <script src="rps.js" defer></script>
</head>
<body>
    <div id="result"></div>
    <div id="score"></div>

    <div class="choices">
        <button value="rock">Rock</button>
        <button value="paper">Paper</button>
        <button value="scissors">Scissors</button>
    </div>

    <button id="restart" style="display: none">Restart</button>

    <script>

        let btns = document.querySelectorAll(".choices");
        let result = document.querySelector("#result");
        let score = document.querySelector("#score");
        let restart = document.querySelector("#restart");
        let choice = ["rock", "paper", "scissors"];
        let computerSelection;
        let playerSelection;
        let computerScore = 0;
        let playerScore = 0;

        function getComputerChoice() {
            let random = [(Math.floor((Math.random() * 3)))];
            return choice[random];
        }

        function capitalize(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }

        function playerRound(playerSelection, computerSelection) {
                if ((playerSelection === "rock" && computerSelection === "paper") || (playerSelection === "paper" && computerSelection === "scissors")
                    || (playerSelection === "scissors" && computerSelection === "rock")) {
                        computerScore++;
                        result.textContent = `You Loose! ${capitalize(computerSelection)} beats ${capitalize(playerSelection)}`;
                    } else if ((playerSelection === "paper" && computerSelection === "rock") || (playerSelection === "scissors" && computerSelection === "paper")
                    || (playerSelection === "paper" && computerSelection === "rock") || (playerSelection === "rock" && computerSelection === "scissors")) {
                        playerScore++;
                        result.textContent = `You Win! ${capitalize(playerSelection)} beats ${capitalize(computerSelection)}`;
                    } else if (playerSelection === computerSelection) {
                        result.textContent = "It's a tie!";
                    }
                
            if ((playerScore || computerScore) == 5) {
                if (playerScore > computerScore) {
                    result.textContent = "You won!";
                } else if (playerScore < computerScore) {
                    result.textContent = "You lost";
                }
                restart.style.cssText = "display: block;";
            }

            score.textContent = `${playerScore} - ${computerScore}`;
        }

        score.textContent = `${playerScore} - ${computerScore}`;
         
        restart.addEventListener('click', () => {
            playerScore = 0;
            computerScore = 0;
            result.textContent = "";
            restart.style.cssText = "display: none;";
            score.textContent = `${playerScore} - ${computerScore}`;
        })

        btns.forEach((btn) => {
            btn.addEventListener('click', (event) => {
                playerSelection = event.target.value;
                computerSelection = getComputerChoice();
                playerRound(playerSelection, computerSelection);
                }
            )}
        );

    </script>
</body>
</html>